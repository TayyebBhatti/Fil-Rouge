{% extends "base.html.twig" %}
{% block title %}Accueil{% endblock %}

{% block body %}
  <h1>√âv√©nements</h1>

  {% if evenements is empty %}
    <p>Aucun √©v√©nement pour le moment.</p>
  {% else %}
    <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px;">
      {% for e in evenements %}
        <article style="border:1px solid #e5e7eb;border-radius:12px;padding:12px;">
          {# Titre #}
          <h2 style="margin:4px 0 6px;font-size:1.1rem;">
            {{ e.titre ?? ('√âv√©nement #' ~ e.id) }}
          </h2>

          {# Dates #}
          <p style="margin:0;color:#555;">
            {{ e.dateDebut ? e.dateDebut|date('d/m/Y H:i') : 'Date √† venir' }}
            {% if e.dateFin %} ‚Üí {{ e.dateFin|date('d/m/Y H:i') }}{% endif %}
          </p>

          {# Lieu #}
          {% set l = e.lieu ?? null %}
          {% if l %}
            <p style="margin:4px 0;color:#444;">
              üìç {{ l.nom ?? '' }}{% if l.ville %}, {{ l.ville }}{% endif %}{% if l.pays %} ‚Ä¢ {{ l.pays }}{% endif %}
            </p>
          {% endif %}

          {# Cat√©gorie #}
          {% if e.categorie %}
            <p style="margin:4px 0;color:#444;">üè∑Ô∏è {{ e.categorie.nom ?? e.categorie }}</p>
          {% endif %}

          {# Description #}
          {% if e.description %}
            <p style="margin-top:6px;">
              {{ e.description|u.truncate(180, '‚Ä¶', false) }}
            </p>
          {% endif %}

          {# Capacit√©s et inscriptions #}
          {% set nbInsc = e.inscriptions is defined ? e.inscriptions|length : 0 %}
          {% if e.capaciteMax is defined %}
            <p style="margin:6px 0;color:#333;">
              {{ nbInsc }}/{{ e.capaciteMax }} inscrits
              {% set rest = e.capaciteMax - nbInsc %}
              {% if rest <= 0 %}<strong> ‚Ä¢ Complet</strong>{% endif %}
            </p>
          {% elseif e.inscriptions is defined %}
            <p style="margin:6px 0;color:#333;">{{ nbInsc }} inscrit(s)</p>
          {% endif %}

          {# Bouton d√©tail si une route existe (# √† remplacer) #}
          {# <a href="{{ path('evenement_show', {id: e.id}) }}" class="btn">D√©tails</a> #}
        </article>
      {% endfor %}
    </div>
  {% endif %}
{% endblock %}
