{% extends 'base.html.twig' %}
{% block title %}Gestion des événements{% endblock %}

{% block stylesheets %}
<style>
  body { font-family: system-ui, sans-serif; background: #f9fafb; color: #111827; margin: 0; padding: 24px; }
  h1 { margin-bottom: 20px; }
  a.btn { display:inline-block; padding:10px 16px; border-radius:8px; text-decoration:none; color:white; background:#16a34a; border:1px solid #16a34a; }
  a.btn:hover { background:#15803d; }
  table { width:100%; border-collapse:collapse; margin-top:20px; background:white; border:1px solid #e5e7eb; border-radius:8px; overflow:hidden; }
  th, td { padding:10px 12px; border-bottom:1px solid #e5e7eb; }
  thead { background:#e0f2fe; color:#0369a1; }
  .action-btn { padding:6px 10px; border-radius:6px; border:1px solid; font-size:0.9rem; cursor:pointer; text-decoration:none; }
  .edit { border-color:#0ea5e9; color:#075985; }
  .delete { background:#dc2626; color:white; border-color:#dc2626; }
  .delete:hover { background:#b91c1c; }
</style>
{% endblock %}

{% block body %}
<h1>Gestion des événements</h1>

<a href="{{ path('admin_evenement_new') }}" class="btn">+ Ajouter un événement</a>

<table>
  <thead>
    <tr>
      <th>ID</th><th>Titre</th><th>Date début</th><th>Capacité</th><th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for e in evenements %}
      <tr>
        <td>{{ e.id }}</td>
        <td>{{ e.titre }}</td>
        <td>{{ e.dateDebut ? e.dateDebut|date('d/m/Y H:i') : '' }}</td>
        <td>{{ e.capaciteMax ?? '-' }}</td>
        <td>
          <a href="{{ path('admin_evenement_edit', {id: e.id}) }}" class="action-btn edit">Modifier</a>
          <form method="post" action="{{ path('admin_evenement_delete', {id: e.id}) }}" style="display:inline;" onsubmit="return confirm('Supprimer cet événement ?');">
            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ e.id) }}">
            <button type="submit" class="action-btn delete">Supprimer</button>
          </form>
        </td>
      </tr>
    {% else %}
      <tr><td colspan="5">Aucun événement.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
